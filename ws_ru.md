### Список интерфейсов

|**Тип интерфейса**|   **Тип данных интерфейса**   |**Метод запроса** |**Тип**   |**Описание**  |**Нужна ли проверка** |
|----------- |------------------ |----------- |---------- |---------------------------- |--------------|
|Websocket   |Интерфейс маркета |  market.$symbol.kline.$period|    sub        |Подписка на данные KLine  |Нет|
|Websocket   |Интерфейс маркета|           market.$symbol.kline.$period|  req        |Запрос данных KLine              |Нет|
|Websocket   |Интерфейс маркета           |market.$symbol.depth.$type |       sub        |Подписка на данные Market Depth        |Нет|
|Websocket   |Интерфейс маркета           |market.$symbol.detail|                                         sub        |Подписка на данные Market detail       |Нет|
|Websocket   |Интерфейс маркета          |market.$symbol.trade.detail |                                         req        |Запрос данных Trade detail       |Нет|
|Websocket   |Интерфейс маркета          |market.$symbol.trade.detail|        sub |Подписка на данные Trade Detail  | Нет  |
|Websocket   |Интерфейс торгов          |orders.$symbol|        sub |Подписка на данные о исполненных сделках  | Да  |

#### Адрес подписки на контракт
Адрес запроса и подписки на котировку Huobi DM：wss://www.hbdm.com/ws

Адрес подписки на уведомления об ордерах Huobi DM：wss://api.hbdm.com/notification

Если у вас есть какие-либо вопросы о подписке на уведомления об контрактах, вы можете обратиться к [Demo](https://github.com/huobiapi/Futures-Java-demo)
#### Лимит посещений

Существует ограничение на доступ как к открытым, так и к личным интерфейсам пользователя
* Ограничение скорости частного интерфейса API-ключа составляет не более 10 раз/сек для каждого UID (этом ограничением 10 раз/секунда используются все типы контрактов у этого UID).
* Для публичного интерфейса, используемого для получения информации об индексе, ценовом пределе, расчетах, поставках, открытых позициях и т. д., ограничение скорости составляет не более 20 раз/секунду для каждого IP (этом ограничением скорости публичного интерфейса 20 раз/секунду используются все запросы от этого IP-адреса нерыночной информации, как указано выше).
* Касается публичного интерфейса, используемого для получения данных свечного графика, последней записи транзакции и информации о совокупном рынке, книге заказов и т. д., ограничение скорости как показано ниже: 

    （1） Интерфейс restful：не более 200 раз/секунд для одного IP. 

    （2）  websocket：Ограничение скорости для запроса " req " составляет 50 раз в одно и то же время；Нет ограничений для запроса "sub", поскольку сервер будет выталкивать данные. 

* Если у вас есть особые потребности в скорости доступа API, пожалуйста, свяжитесь с dm_mm@huobi.com по теме «Запрос на повышение скорости API» с следующей информацией：

    （1）Ваш Huobi UID

    （2）Цель и ожидаемый рост вашего приложения

    （3）Нужная вам скорость доступа

  Наши сотрудники будут оперативно следить за вашей заявкой на повышение скорости.

Интерфейс маркета
--------

#### Подписка на данные KLine 

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

    {
    "sub": "market.$symbol.kline.$period",
    "id": "id generate by client"
    }

|**Название параметра**|   **Необходимо ли**  | **Тип**  | **Описание** |  **Значение по умолчанию**  | **Диапазон значений**|
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
|symbol  |       true         |  string  |   Торговая пара   |               |Например, "BTC\_CW" означает недельный контракт BTC, "BTC\_NW" - двухнедельный контракт BTC, "BTC\_CQ" - квартальный контракт BTC |
|period    |     true          | string   |  Цикл K-Line     |            |1min, 5min, 15min, 30min, 1hour,4hour,1day, 1mon|

Правильный пример подписки на параметры запроса:

    {
    "sub": "market.BTC_CQ.kline.1min",
    "id": "id1"
    }

Пример успешного возврата данных по подписке:

    {
    "id": "id1",
    "status": "ok",
    "subbed": "market.BTC_CQ.kline.1min",
    "ts": 1489474081631
    }

После этого, когда KLine имеет обновление, client может получать данные, например

    {
     "ch": "market.BTC_CQ.kline.1min",
     "ts": 1489474082831,
     "tick": 
        {
         "id": 1489464480,
         "mrid": 268168237,
         "vol": 100,
         "count": 0,
         "open": 7962.62,
         "close": 7962.62,
         "low": 7962.62,
         "high": 7962.62,
         "amount": 0.3 //единиц BTC   Количество токенов
        }
    }
    
    Описание tick 
    
    "tick": 
      {
       "id": id Kline,
       "mrid": 268168237,
       "vol": Количество контрактов,
       "count": Количество сделок,
       "open": Цена открытия,
       "close": Цена закрытия, когда K-линия является последней, это последняя цена
       "low": Минимальная цена,
       "high": Максимальная цена,
       "amount": BTC, т. е. sum(Номинальная стоимость каждого контракта* объем/цена сделки)
    }

**Пример неправильной подписки**

Неправильная подписка(Неправильный symbol)

    {
     "sub": "market.invalidsymbol.kline.1min",
     "id": "id2"
    }

Пример возврата данных после сбоя подписки

    {
     "id": "id2",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.invalidsymbol.kline.1min",
     "ts": 1494301904959
    }

Неправильная подписка(Неправильный topic)

    {
     "sub": "market.BTC_CQ.kline.3min",
     "id": "id3"
    }

Пример возврата данных после сбоя подписки

    {
     "id": "id3",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.BTC_CQ.kline.3min",
     "ts": 1494310283622
    }

#### Запрос данных KLine  </a>

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

    {
     "req": "market.$symbol.kline.$period",
     "id": "id generated by client",
     "from": "optional, type: long, время в пределах дат с 2017-07-28T00:00:00+08:00 до 2050-01-01T00:00:00+08:00, единица измерения: секунды",
      "to": "optional, type: long, время в пределах дат с 2017-07-28T00:00:00+08:00 до 2050-01-01T00:00:00+08:00 единица измерения: секунды, должно больше чем from "}

|**Название параметра**|   **Необходимо ли**  | **Тип**  | **Описание** |  **Значение по умолчанию**  | **Диапазон значений** |
| -------- | -------- | ------ | ------ | ------- |---------------------------------------- |
|symbol  |       true         |  string  |   Торговая пара   |               |Например, "BTC\_CW" означает недельный контракт BTC, "BTC\_NW" - двухнедельный контракт BTC, "BTC\_CQ" - квартальный контракт BTC |
| period | true | string | Цикл Kline| | 1min, 5min, 15min, 30min, 1hour,4hour,1day, 1mon|

    [t1, t5]Предположим, что существует K-линия t1 ~ t5：
    
    from: t1, to: t5, return [t1, t5].
    from: t5, to: t1, which t5  > t1, return [].
    from: t5, return [t5].
    from: t3, return [t3, t5].
    to: t5, return [t1, t5].
    from: t which t3  < t  <t4, return [t4, t5].
    to: t which t3  < t  <t4, return [t1, t3].
    from: t1 and to: t2, should satisfy 1325347200  < t1  < t2  < 2524579200.

**Заметка**: не более 300 шт. в один раз

Пример запроса параметра запроса данных KLine:

    {
    "req": "market.BTC_CQ.kline.1min",
    "id": "id4"
    }

Пример возврата данных после успешного запроса:

    {
     "rep": "market.BTC_CQ.kline.1min",
     "status": "ok",
     "id": "id4",
     "tick": [
       {
        "vol": 100,
        "count": 27,
        "id": 1494478080,
        "open": 10050.00,
        "close": 10058.00,
        "low": 10050.00,
        "high": 10058.00,
        "amount": 175798.757708
       },
       {
        "vol": 300,
        "count": 28,
        "id": 1494478140,
        "open": 10058.00,
        "close": 10060.00,
        "low": 10056.00,
        "high": 10065.00,
        "amount": 158331.348600
       }
     ]
    }

#### Подписка на данные Market Depth  </a>

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：


    {
    "sub": "market.$symbol.depth.$type",
    "id": "id generated by client"
    }

|**Название параметра**|   **Необходимо ли**  | **Тип**  | **Описание** |  **Значение по умолчанию**  | **Диапазон значений** |
|-------------- |-------------- |---------- |------------ |------------ |---------------------------------------------------------------------------------|
|symbol  |       true         |  string  |   Торговая пара   |               |Например, "BTC\_CW" означает недельный контракт BTC, "BTC\_NW" - двухнедельный контракт BTC, "BTC\_CQ" - квартальный контракт BTC |
|type           |true           |string     |Тип Depth       |        |(150 уровней данных)  step0, step1, step2, step3, step4, step5（объединить глубины 1-5）, при step0, не объединять глубину; (20 уровней данных)  step6, step7, step8, step9, step10, step11（объединить глубины 7-11）；при step6, не объединять глубину|

**Заметка**：Когда пользователь выбирает“Объединить глубину”, рыночные открытые ордера в пределах определенной точности котировок будут объединены и показаны. Объединение глубин изменяет только режим отображения, а не фактическую цену сделки.

Примеры правильной подписки на параметры запроса：

    {
    "sub": "market.BTC_CQ.depth.step0",
    "id": "id5"
    }

Пример возврат данных после успешной подписки:

    {
      "id": "id5",
      "status": "ok",
      "subbed": "market.BTC_CQ.depth.step0",
      "ts": 1489474081631
    }

Дальше client может получать данные при каждом обновлении depth, например：

    {
     "ch": "market.BTC_CQ.depth.step0",
     "ts": 1489474082831,
     "tick":
       { 
        "mrid": 269073229,
         "id": 1539843937,
            "bids": [
             [9999.9101,1], 
             [9992.3089,2]
                    ],
             "asks": [
              [10010.9800,10],
              [10011.3900,15]
                     ],
          "ts": 1539843937417,
           "version": 1539843937,
           "ch": "market.BTC_CQ.depth.step0"
        }
    }
    
    Описание tick ：
    "tick": {
      "bids": [
        [Цына Купить1,Объем Купить1]
        [Цына Купить2, Объем Купить2]
         //more data here
       ],
       "asks": [
        [Цена Продать1, Объем Продать1]
        [Цена Продать2, Объем Продать2]
        //more data here
       ]
    }

#### Подписка на данные Market Detail  </a>

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

    {
     "sub": "market.$symbol.detail",
     "id": "id generated by client"
    }

|**Название параметра**|   **Необходимо ли**  | **Тип**  | **Описание** |  **Значение по умолчанию**  | **Диапазон значений** |
|-------------- |-------------- |---------- |------------ |------------ |--------------------------------------------------------------------------------|
|symbol  |       true         |  string  |   Торговая пара   |               |Например, "BTC\_CW" означает недельный контракт BTC, "BTC\_NW" - двухнедельный контракт BTC, "BTC\_CQ" - квартальный контракт BTC |

Пример параметров запрос подписки на данные Market Detail：

    {
     "sub": "market.BTC_CQ.detail",
     "id": "id6"
    }

Пример возврата данных после успешного запроса：

    {
    "ch": "market.BTC_CW.detail",
    "ts": 1539842340724,
    "tick": {
    	"id": 1539842340,
    	"mrid": 268041138,
    	"open": 6740.47,
    	"close": 7800,
    	"high": 7800,
    	"low": 6726.13,
    	"amount": 477.1200312075244664773339914558562673572,
    	"vol": 32414,
    	"count": 1716
            }
       }

Описание данных tick：

    "tick": 
         { 
           "id": id, 
           "mrid": 1494496390000, 
           "vol": Количество контрактов, 
           "count": Количество сделок,
           "open": Цента открытия, 
           "close": Цена закрытия, когда K-линия является последней, это последняя цена
           "low": Минимальная цена,
           "high": Максимальная цена,
           "amount": Объем сделки(токен), т. е. sum(Номинальная стоимость каждого контракта* объем(конт.)/цена сделки)
         }

#### Запрос данных Trade Detail 

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

    {
     "req": "market.$symbol.trade.detail",
     "id": "id generated by client"
    }

Возвращает только текущий Trade Detail

Пример запроса данных Market Detail：

    {
     "req": "market.BTC_CQ.trade.detail",
     "id": "id8"
    }

Пример возврата данных после успешного запроса:



    {
     "ch": "market.BTC_CQ.trade.detail",
     "ts": 1489474082831,
     "data": [
              {
               "id":601595424,
               "price":10195.64,
               "amount":100,
               "direction":"buy",
               "ts":1494495766000
               },
              {
              "id":601595423,
              "price":10195.64,
              "amount":200,
              "direction":"buy",
              "ts":1494495711000
              }
            ]
     }

Описание данных tick：

    "data": [
      {
       "id": ID сообщения,
       "price": Цена,
       "amount": Объем(контракт）,
       "direction": Направление,
       "ts": Время
      }
     ]

#### Подписка на данные Trade Detail  </a>

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

    {
    "sub": "market.$symbol.trade.detail",
    "id": "id generated by client"
    }

**Заметка**：Можно получить только 300 последних данных Trade Detail.

|**Название параметра**|   **Необходимо ли**  | **Тип**  | **Описание** |  **Значение по умолчанию**  | **Диапазон значений** |
|-------------- |-------------- |---------- |---------- |------------ |--------------------------------------------------------------------------------|
|symbol  |       true         |  string  |   Торговая пара   |               |Например, "BTC\_CW" означает недельный контракт BTC, "BTC\_NW" - двухнедельный контракт BTC, "BTC\_CQ" - квартальный контракт BTC |

Правильный пример подписки на параметры запроса:

    {
     "sub": "market.BTC_CQ.trade.detail",
     "id": "id7"
    }

Пример возврата данных по успешной подписке:

    {
     "id": "id7",
     "status": "ok",
     "subbed": "market.BTC_CQ.trade.detail",
     "ts": 1489474081631
    }

Затем при каждом обновлении Trade Detail, client будет получать данные, например:

    {
    "ch": "market.BTC_NW.trade.detail",
    "ts": 1539831709042,
    "tick": {
    	"id": 265842227,
    	"ts": 1539831709001,
    	"data": [{
    		"amount": 20,
    		"ts": 1539831709001,
    		"id": 265842227259096443,
    		"price": 6742.25,
    		"direction": "buy"
    	        }]
              }
     }

Описание data：

    "data": [
      {
       "id": ID сообщения,
       "price": Цена,
       "amount": Объем(контракт),
       "direction": Направление,
       "ts": Время
      }
     ]


#### Аутентификация-Authentication

Пользователь самостоятельно создает Access Key и Secret Key на Huobi и сам храняет Secret Key, и должен предоставить Access Key. В настоящее время для применения и изменения apikey, пожалуйста, создайте новый ключ API в “Аккаунт – Управление API”, заполните Примечания(можно выбрать привязать ip), и нажмите кнопку Создать. Где Access Key - это ключ доступа API, а Secret Key - это ключ, который пользователь подписывает запрос(виден только при запросе). Пользователь создает подпись(Signature) по правилу. 

При установке соединения интерфейса websocket версии функции транзакций, сначать нужно сделать аутентификацию, и формат выглядит следующим образом,

Важно: эти два ключа тесно связаны с безопасностью учетной записи и не должны раскрываться другим людям в любое время. 

####Формат данных запроса аутентификации

```
{
  "op": "auth",
  "type": "api",
  "AccessKeyId": "e2xxxxxx-99xxxxxx-84xxxxxx-7xxxx",
  "SignatureMethod": "HmacSHA256",
  "SignatureVersion": "2",
  "Timestamp": "2017-05-11T15:19:30",
  "Signature": "4F65x5A2bLyMWVQj3Aqp+B4w+ivaA7n5Oi2SuYtCJ9o=",
}
```
####Описание формата данных запроса аутентификации

| Название         | Тип   | Описание                                                         |
| :--------------- | :----- | :----------------------------------------------------------- |
| op               | string | Обязательно; название операции, фиксированное значение аутентификации - auth                        |
| type             | string | Обязательно; api метод аутентификации представляет аутентификацию интерфейса, ticket представляет аутентификацию терминала         |
| cid              | string | Опционально; уникальный ID запроса Client                                   |
| AccessKeyId      | string | Обязательно, когда значение type является api; Ключ доступа API, AccessKey в APIKEY вы применяете|
| SignatureMethod  | string | Обязательно, когда значение type является api；Метод подписи, пользователь вычисляет подписанный протокол на основе хэша, здесь используется HmacSHA256 |
| SignatureVersion | string | Обязательно, когда значение type является api; Версия Соглашения о подписании，здесь используется 2              |
| Timestamp        | string |Обязательно, когда значение type является api; Время. Время, в которое вы сделали запрос (часовой пояс UTC). Включение этого значения в запрос помогает предотвратить перехват вашего запроса третьими лицами. Например: 2017-05-11T16:22: 06. Еще раз подчеркнут в (часовой пояс UTC) |
| Signature        | string | Обязательно, когда значение type является api; Подписаться, вычисляется значение, используемое для обеспечения того, чтобы подпись была действительной и не была подделана|
| ticket           | string | Обязательно, когда значение type является api; Возвращает при входе                         |

Внимание: 

* Для того, чтобы уменьшить рабочую нагрузку доступа у пользователей, здесь используется тот же алгоритм подписи интерфейса REST для аутентификации.
* Обратите внимание на регистр
* Когда type является api, параметры op, type,cid, Signature не участвуют в вычислении подписи
* Здесь метод запроса подписи с фиксированным значением "GET" для вычисления подписи, остальные значения см. в документации по алгоритму подписи интерфейса REST

Шаги：

 Пример процесса вычисления подписи(Signature) параметров выглядит следующим образом，

* Спецификация запроса для расчета подписи, так как при использовании HMAC для расчета подписи, результаты, рассчитанные с использованием другого содержимого, будут полностью
  По-другому.Поэтому перед вычислением подписи, пожалуйста, нормализуйте запрос.

* Метод запроса (GET или POST), за которым следует символ новой строки `\n`.
* Спецификация запроса для расчета подписи, так как при использовании HMAC для расчета подписи, результаты, рассчитанные с использованием другого содержимого, будут полностью по-другому. Поэтому перед вычислением подписи, пожалуйста, нормализуйте запрос.

* Метод запроса (GET или POST), за которым следует символ новой строки `\n`.

 ```
  GET\n
 ```

* Добавить адрес доступа в нижнем регистре, а затем добавить символ новой строки `\n` 

  ```
  xxxx.xxx.com\n
  ```

* Путь к методу доступа, за которым следует символ новой строки`\n`.

  ```
  /xxx/xx\n
  ```

* Названия параметров сортируются в порядке ASCII-кода (с кодировкой UTF-8 и кодировкой URI, шестнадцатеричные символы должны быть заглавными, например":" кодируются как "%3A", а пробелы - как "%20"). Например, ниже приведен исходный порядок параметров запроса после кодирования.

  ```
  AccessKeyId=e2xxxxxx-99xxxxxx-84xxxxxx-
  7xxxx&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2017-05-
  11T15%3A19%3A30
  ```

* В соответствии с вышеуказанным порядком, каждый параметр соединен с символом ’&’. 
* Строка, состоящая из окончательного вычисления подписи, выглядит следующим образом:
* Вычисляет сигнатуру, передавая следующие два параметра в криптографическую хэш-функцию: строку для вычисления подписи, ключ (SecretKey) для подписи 
* Получить результат вычисления подписи и закодировать Base64
* Добавить эти значения в запрос API в качестве значений для Signature параметра. При добавлении этого параметра в запрос необходимо выполнить кодировку URI для этого значения.

####Описание формата данных ответа аутентификации

| Название     | Тип    | Описание                                                |
| :------- | :------ | :--------------------------------------------------- |
| op       | string  | Обязательно; название опарации, Фиксированное значение аутентификации- auth                    |
| type     | string  | Обязательно; возвращается в соответствии с параметрами запроса.                      |
| cid      | string  | Опционально; запрос будет возвращен при переносе.                        |
| err-code | integer | Успешно - возвращает 0, при ошибке – другое значение, обратитесь к приложению для подробного списка столбцов кода ответа, пожалуйста, |
| err-msg  | string  | Необязательно, указывает подробное сообщение об ошибке при ошибке    |
| ts       | long    | Время ответа сервера                                   |
| user-id  | long    |  id пользователя                                              |

Пример ответа данных успешной аутентификации

```
 
{
  "op": "auth",
  "type":"api",
  "ts": 1489474081631,
  "err-code": 0,
  "data": {
    "user-id": 12345678
  }
}
```

Возврат данных при сбое аутентификации 

```
{
"op": "auth",
"type":"api",
"ts": 1489474081631, 
"err-code": xxxx， 
"err-msg": ” Подробные сведения об ошибке“
}
```

####Подписка на данные об исполненных сделках(sub)

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

#### Формат данных запроса подписки

```
{
  “op”: “sub”,
  "cid": "id generated by client”,
  “topic": "topic to sub”
}
```

#### Описание формата данных запроса подписки

| Название | Тип   | Описание                                        |
| :------- | :----- | :------------------------------------------ |
| op       | string |Обязательно; название операции, подписка с фиксированным значением sub            |
| cid      | string |Опционально; уникальный ID запроса у Client                   |
| topic    | string |Обязательно;подписаться на название темы, обратитесь к приложению для подробного списка тем; |

#### Пример запроса подписки

Правильный запрос подписки

```
{
  "op": "sub",
  "cid": "40sG903yz80oDFWr",
  "topic": "orders.btc"
}
```

Пример возврата данных после успешной подписки

```
{
  "op": "sub",
  "cid": "40sG903yz80oDFWr",
  "err-code": 0,
  "ts": 1489474081631,
  "topic": "orders.btc"
}
```

Неправильный  пример запроса подписки (Неправильный topic)

```
{
  "op": "sub",
  "topic": "orders.bar",
  "cid": "40sG903yz80oDFWr"
}
```

Возвращают следующие данные при сбое подписки

```
{
  "op": "sub",
  "topic": "orders.bar",
  "cid": "40sG903yz80oDFWr",
  "err-code": xxxx, //См. таблицу кода ответа для специфического кодирвоания
  "err-msg": “Подробные сведения об ошибке”，
  "ts": 1489474081631
}
```

####Описание формата данных уведомления о деталях сделки

```
{
“op”: “notify”, // Название операции
“topic”: “orders.btc”, // Тема
"ts": 1489474082831, // Время
"symbol": "BTC", //Символ
"contract_type": "this_week", //Тип контракта
"contract_code": "BTC180914", //Код контракта
"volume": 111, //Объем ордера
"price": 1111, //Цена ордера
"order_price_type": "limit", //Тип предложения ордера "limit":Лимитная цена "opponent":оппонент
"direction": "buy", //"buy":Купить "sell":Продать
"offset": "open", //"open":Открыть "close":Закрыть
"status": 6 //Статус ордера(3 Подано 4 Частично исполнено 5 Частично исполнено и отменено 6 Исполнено 7 Отменено)
"lever_rate": 10, //Кредитное плечо
"order_id": 106837, //ID ордера
"client_order_id": 10683, // ID ордера клиента
"order_source": "web", //Источник ордера（system: система  web:веб пользователя  api:API пользователя  m: M-станция пользователя  risk: система управления риском）
"order_type": 1, //Тип ордера (1: Подача, 2: Отмена , 3: Принудительное закрытие, 4: Поставка)
"created_at": 1408076414000, //Время создания ордера
"trade_volume": 1, //Объем сделки
"trade_turnover": 1200, //Сумма
"fee": 0, //Комиссия
"trade_avg_price": 10, //Средняя цена
"margin_frozen": 10, //Замороженная маржа
"profit": 2, //Прибыль
"trade":[{
    "trade_id":112, //id результата сопоставления
    "trade_volume":1, //Объем
    "trade_price":123.4555, //Цена сопоставления
    "trade_fee":0.234, //Комиссия сделки
    "trade_turnover":34.123, //Сумма
    "created_at": 1490759594752 //Время создания сделки
  }]
}
```

#### Описание формата данных запроса уведомления о сделках

| Название              | Тип    | Описание                                                        |
| ----------------------- | ------- | ------------------------------------------------------------ |
| op                      | string  | Обязательно; название операции, с фиксированным значением - notify;                          |
| topic                   | string  | Обязательно; тема push                                              |
| ts                      | long    |     Время ответа сервера                                         |
| symbol                  | string  |ID символа                                                      |
| contract_type           | string  | Тип контракта                                                      |
| contract_code           | string  | Код контракта                                                     |
| volume                  | decimal | Объем ордера                                                     |
| price                   | decimal | Цена ордер                                                     |
| order_price_type        | string  | Тип предложения ордера "limit":Лимитная цена "opponent":оппонент           |
| direction               | string  | "buy":Купить "sell":Продать                                           |
| offset                  | string  | "open":Открыть "close":Закрыть                                        |
| status                  | int     | Статус ордера(3 Подано 4 Частично исполнено 5 Частично исполнено и отменено 6 Исполнено 7 Отменено) |
| lever_rate              | int     | Кредитное плечо                                                     |
| order_id                | long    | ID ордера                                                       |
| client_order_id         | long    | ID ордера клиента                                                   |
| order_source            | int     | Источник ордера（system: система  web:веб пользователя  api:API пользователя  m: M-станция пользователя  risk: система управления риском |
| order_type              | int     | Тип ордера (1: Подача, 2: Отмена , 3: Принудительное закрытие, 4: Поставка)             |
| created_at              | long    | Время создания ордера                                                 |
| trade_volume            | decimal | Объем сделки                                                     |
| trade_turnover          | decimal | Сумма                                                   |
| fee                     | decimal | Комиссия                                                       |
| trade_avg_price         | decimal | Средняя цена                                                     |
| margin_frozen           | decimal | Замороженная маржа                                                   |
| profit                  | decimal |Прибыль                                                         |
| <list>(Название свойства: trade) |         |                                                              |
| trade_id                | long    | id результата сопоставления                                                   |
| trade_volume            | decimal | Объем                                                       |
| trade_price             | decimal | Цена сопоставления                                                     |
| trade_fee               | decimal | Комиссия сделки                                                  |
| trade_turnover          | decimal | Сумма                                                     |
| created_at              | long    | Время создания сделки                                                 |
| <list>                  |         |                                                              |



### Отмена подписки на данные（ubsub）

После успешного подключения к API WebSocket, отправляют Server данные в следующем формате для запроса данных：

####Формат данных запроса на отмену подписки

```
{
  “op”: “unsub”,
  “topic": "topic to unsub”,
  "cid": "id generated by client”,
}
```

#### Описание формата данных запроса на отмену подписки

| Название | Тип   | Описание                                               |
| :------- | :----- | :------------------------------------------------- |
| op       | string | Обязательно; название операции, подписаться с фиксированным значением - unsub;              |
| cid      | string | Опционально; уникальный ID запроса Client                         |
| topic    | string |Обязательно; обратитесь к приложению для название темы отмены подписки, подробного списка тем; |

### Пример запроса на отмену подписки

Правильный пример запроса на отмену подписки

```
{
  "op": "unsub",
  "topic": "orders.btc",
  "cid": "40sG903yz80oDFWr"
}
```

Пример возврата данных после успешной отмены

```
{
  "op": "unsub",
  "topic": "orders.btc",
  "cid": "id generated by client",
  "err-code": 0,
  "ts": 1489474081631
}
```

####Описание правил подписки и отмены подписки

| Подписка(sub)      | Правила отмены подписки(ubsub) |   |
| -------------- | --------------- | ------ |
| orders.*       | orders.*        | Разрешено   |
| orders.symbol1 | orders.*        | Разрешено   |
| orders.symbol1 | orders.symbol1  | Разрешено   |
| orders.symbol1 | orders.symbol2  | Запрещено |
| orders.*       | orders.symbol1  | Запрещено |

### Приложение

###Описание типов операции（OP）

| Тип   | Описание                 |
| ------ | -------------------- |
| ping   | Пакет ping (server)     |
| pong   | Пакет  pong            |
| auth   | Аутентификация                 |
| sub    | Подписка на сообщения            |
| unsub  | Отмена подписки на сообщения        |
| notify | Push-сообщения Подписки(server) |

#### Описание типов тем（topic）

| Тип           | Тип операции использования | Описание                                                       |
| -------------- | ------------ | ------------------------------------------------------------ |
| orders.$symbol | sub,ubsub    |Подписаться, отписаться от сообщения об изменении ордера для определенной торговой пары, когда значение $symbol  является * , значит что подписаться на все торговые пары |

#### Описание кода ошибки(Err-Code)

| Код ответа | Описание                                 |
| ------ | ---------------------------------------- |
| 0      | Request successfully.                    |
| 2001   | Invalid authentication.                  |
| 2002   | Authentication required.                 |
| 2003   | Authentication failed.                   |
| 2004   | Number of visits exceeds limit.          |
| 2005   | Connection has been authenticated.       |
| 2010   | Topic error.                             |
| 2011   | Contract doesn't exist.                  |
| 2012   | Topic not subscribed.                    |
| 2013   | Authentication type doesn't exist.       |
| 2014   | Repeated subscription.                   |
| 2030   | Exceeds connection limit of single user. |
| 2040   | Missing required parameter.              |
