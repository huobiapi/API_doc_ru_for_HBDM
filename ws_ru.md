
### Список API

| **ТИП** |   **Тип рынка**   |**Контекст** |**Метод запроса**   |**Описание**                     |**Необходимо аутентификация**        |
|----------- |------------------ |------------------------------------------------------------------------------------------------------------------------------------------------------------------- |---------- |---------------------------- |--------------|
|Websocket   |Интерфейс рынка |         market.$symbol.kline.$period|                                                                                                            sub        |Подписка на данные свечей              |No|
|Websocket   |Market Interface|           market.$symbol.kline.$period|                                                                                                                    req        |Запрос на данные свечей              |No|
|Websocket   |Market Interface           |market.$symbol.depth.$type |                                                                                                                     sub        |Подписка на данные о глубине рынка        |No|
|Websocket   |Market Interface           |market.$symbol.detail |                                                                                                                     sub        |Подписка на подробные данные о трейдинге       |No|
|Websocket   |Market Interface           |market.$symbol.trade.detail |                                                                                                                     req        |Запрос на подробные данные о трейдинге        |No|
|Websocket   |Интерфейс рынка           |market.$symbol.trade.detail|        sub | Подписка на подробные данные о трейдинге   | No  |


#### Примеры лимита скорости API

Обратите внимание, что как для публичного интерфейса, так и для частного интерфейса установлен лимит. Подробности ниже:
* Как правило, лимит скорости API-ключа для частного интерфейса составляет не более 10 раз/сек для каждого UID (это ограничение скорости 10 раз/сек используется всеми контрактами альткоинов, выполненными в другую дату).
* Для публичного интерфейса, используемого для получения информации об индексе, ценовом пределе, расчете, выполнении, открытых позициях и т. д., лимит скорости составляет не более 20 раз/сек для каждого IP (это ограничение скорости публичного интерфейса 20 раз/сек используется всеми запросами от этого IP нерыночной информации, как указано выше).
* С точки зрения публичного интерфейса, используемого для получения данных графика свечей, последней записи о транзакциях и информации о совокупном рынке, таблице заявок и т. д., лимит скорости выглядит следующим образом:
	
    
(1) для Restful интерфейса: максимум 200 раз/сек для одного IP.

(2) для Websocket: ограничение скорости для запроса “req” составляет 50 раз за один промежуток времени. Ограничение скорости для запроса “sub” отсутствует, так как данные будут передаваться сервером добровольно.
* Если у Вас есть особые требования к лимиту скорости API, пожалуйста, отправьте заявку на dm_mm@huobi.com с темой “Заявка на повышение лимита скорости API”. В письме должна содержаться следующая информация:


(1) Пожалуйста, предоставьте Ваш UID.

 (2) Пожалуйста, опишите цель/причины Вашей заявки и ожидаемый рост объема торгов.

 (3) Укажите лимит скорости API, который Вы запрашиваете.

Как только заявка будет принята, мы обработаем ее и ответим Вам в ближайшее время. Спасибо за Ваше терпение.



Интерфейс рынка
--------

#### Подписаться на данные свечей

После установления соединения с WebSocket API, описание данных формируется следующим образом:

    {
    "sub": "market.$symbol.kline.$period",
    "id": "id generate by client"
    }


|**Параметр**| Имя | Тип | Описание | Значение По Умолчанию | Диапазон |
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
| symbol | правда | строка | символ контракта |               |напр. "BTC_CW" означает BTC “this_week”、"BTC_NW" означает BTC “next_week”、"BTC_CQ" означает BTC “quarter“|
| period | правда | строка | период Kline |             |1мин, 5мин, 15мин, 30мин, 60мин, 1день, 1мес, 1неделя, 1год|

Пример правильного параметра подписки:

    {
    "sub": "market.BTC_CQ.kline.1min",
    "id": "id1"
    }


Пример правильного возвращаемого параметра подписки:

    {
    "id": "id1",
    "status": "ok",
    "subbed": "market.BTC_CQ.kline.1min",
    "ts": 1489474081631
    }

Всякий раз, когда KLine будет обновляться, клиент будет получать данные, например:
​    {
​     "ch": "market.BTC_CQ.kline.1min",
​     "ts": 1489474082831,
​     "tick": 
​        {
​         "id": 1489464480,
​         "vol": 100,
​         "count": 0,
​         "open": 7962.62,
​         "close": 7962.62,
​         "low": 7962.62,
​         "high": 7962.62,
​         "amount": 0.3 // Количество BTC
​        }
​    }
​    

Отметка
​    
​    "tick": 
​      {


       "id": Kline ID,
       "vol": транзакция (контракт),
       "count": счетчик транзакций,
       "open": цена открытия,
       "close": цена закрытия, когда Kline последняя, цена - последняя 
       "low": самая низкая цена,
       "high": самая высокая цена,
       "amount": BTC, сумма (обозначение контракта* количество транзакций/цена транзакции)
    
    }


**Пример ошибочной подписки**

Ошибочная подписка (ошибочный символ)

    {
     "sub": "market.invalidsymbol.kline.1min",
     "id": "id2"
    }

Пример неудачной подписки и возвращаемого параметра

    {
     "id": "id2",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.invalidsymbol.kline.1min",
     "ts": 1494301904959
    }


Ошибочная подписка (ошибочная тема)
​    {
​     "sub": "market.BTC_CQ.kline.3min",
​     "id": "id3"
​    }

Пример неудачной подписки и возвращаемого параметра


    {
     "id": "id3",
     "status": "error",
     "err-code": "bad-request",
     "err-msg": "invalid topic market.BTC_CQ.kline.3min",
     "ts": 1494310283622
    }


#### Запрос данных свечей </a>

Ответ:

    {
     "req": "market.$symbol.kline.$period",
     "id": "id generated by client",
     "from": "optional, type: long, 2017-07-28T00:00:00+08:00 to 2050-01-01T00:00:00+08:00，unit：second",
      "to": "optional, type: long, 2017-07-28T00:00:00+08:00 to 2050-01-01T00:00:00+08:00，unit：second，must larger than from"}



|**Параметр**| *Имя* | Тип | Описание | Значение По Умолчанию | Диапазон |
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
| symbol | правда | строка | символ контракта |  |напр. "BTC_CW" означает BTC “this_week”, "BTC_NW" означает BTC “next_week”、"BTC_CQ" означает BTC “quarter“|
| period | правда | строка | период Kline | |1мин, 5мин, 15мин, 30мин, 60мин, 1день, 1мес, 1неделя, 1год|



 [t1, t5] предполагает, что существует Kline oft1 ~ t5:
​    
​    from: t1, to: t5, return [t1, t5].
​    from: t5, to: t1, which t5  > t1, return [].
​    from: t5, return [t5].
​    from: t3, return [t3, t5].
​    to: t5, return [t1, t5].
​    from: t which t3  < t  <t4, return [t4, t5].
​    to: t which t3  < t  <t4, return [t1, t3].
​    from: t1 and to: t2, should satisfy 1325347200  < t1  < t2  < 2524579200.


**Примечание***: максимум 300 за раз

Пример запроса параметра данных Kline:

    {
    "req": "market.BTC_CQ.kline.1min",
    "id": "id4"
    }

Пример успешного запроса и возврата данных:
​    {
​     "rep": "market.BTC_CQ.kline.1min",
​     "status": "ok",
​     "id": "id4",
​     "tick": [
​       {
​        "vol": 100,
​        "count": 27,
​        "id": 1494478080,
​        "open": 10050.00,
​        "close": 10058.00,
​        "low": 10050.00,
​        "high": 10058.00,
​        "amount": 175798.757708
​       },
​       {
​        "vol": 300,
​        "count": 28,
​        "id": 1494478140,
​        "open": 10058.00,
​        "close": 10060.00,
​        "low": 10056.00,
​        "high": 10065.00,
​        "amount": 158331.348600
​       }
​     ]
​    }

#### Подписка на данные о глубине рынка

После установления соединения с WebSocket API, описание данных формируется следующим образом:

    {
    "sub": "market.$symbol.depth.$type",
    "id": "id generated by client"
    }


|**Параметр**| Имя | Тип | Описание | Значение По Умолчанию | Диапазон |
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
| symbol | правда | строка | символ контракта |  |напр. "BTC_CW" означает BTC “this_week”, "BTC_NW" означает BTC “next_week”、"BTC_CQ" означает BTC “quarter“|
|тип |правда |строка | тип глубины | |step0, Шаг1, Шаг2, шаг3, шаг4, шаг5 (глубина слияния 0-5）；step0 означает не слияние|



**Примечание**: когда пользователь выбирает “Глубину слияния”, отложенные рыночные ордера в пределах определенной точности котировки будут объединены и отображены. Глубина слияния только изменяет режим отображения и не изменяет фактическую цену ордера.

Пример корректной подписки запрашивающего параметра:

    {
    "sub": "market.BTC_CQ.depth.step0",
    "id": "id5"
    }

Пример успешной подписки и возвращаемого параметра:
​    {
​      "id": "id5",
​      "status": "ok",
​      "subbed": "market.BTC_CQ.depth.step0",
​      "ts": 1489474081631
​    }

Всякий раз, когда глубина обновляется, клиент будет получать данные, например:
​    {
​     "ch": "market.BTC_CQ.depth.step0",
​     "ts": 1489474082831,
​     "tick":
​       { 
​        "mrid": 269073229,
​         "id": 1539843937,
​            "bids": [
​             [9999.9101,1], 
​             [9992.3089,2]
​                    ],
​             "asks": [
​              [10010.9800,10],
​              [10011.3900,15]
​                     ],
​          "ts": 1539843937417,
​           "version": 1539843937,
​           "ch": "market.BTC_CQ.depth.step0"
​        }
​    }
​    
​    
Пример отметки

    "tick": {
      "bids": [
       [цена покупки 1, количество покупки 1]
      [цена покупки 2, количество покупки 2]
    
        //больше информации здесь
       ],
       "asks": [
     [цена покупки 1, количество покупки 1]
      [цена продажи 2, количество продажи 2]

  //больше информации здесь
​       ]
​    }


#### Подписка на подробные данные трейдинга</а>

После установления соединения с WebSocket API, описание данных формируется следующим образом:
​    {
​     "sub": "market.$symbol.detail",
​     "id": "id generated by client"
​    }


|**Параметр**| Им | Тип | Описание | Значение По Умолчанию | Диапазон |
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
| symbol | правда | строка | символ контракта |               |напр. "BTC_CW" означает BTC “this_week”、"BTC_NW" означает BTC “next_week”、"BTC_CQ" означает BTC “quarter“|

Пример успешной подписки параметра запроса:

    {
     "sub": "market.BTC_CQ.detail",
     "id": "id6"
    }

Пример успешной подписки и возвращаемого параметра:

    {
    "ch": "market.BTC_CW.detail",
    "ts": 1539842340724,
    "tick": {
    	"id": 1539842340,
    	"mrid": 268041138,
    	"open": 6740.47,
    	"close": 7800,
    	"high": 7800,
    	"low": 6726.13,
    	"amount": 477.1200312075244664773339914558562673572,
    	"vol": 32414,
    	"count": 1716
            }
       }

Пример отметки:

    "tick": 
         { 
           "id":  Kline id, 
           "mrid": 1494496390000, 


           "vol": объем торгов, 
           "count": счетчик транзакций, 
           "open": цена открытия, 
           "close": цена закрытия, когда Kline последняя, цена - последняя 
          "low": самая низкая цена, 
           "high": самая высокая цена, 
           "amount": Сумма сделки (валюта), сумма (торговый объем (сумма)*номинал/цена сделки)


         }


#### Запрос подробных данных по трейдингу 

Всякий раз, когда глубина обновляется, клиент получает данные, например:

    {
     "req": "market.$symbol.trade.detail",
     "id": "id generated by client"
    }


Возврат данных по трейдингу

Пример параметра запроса для подробных рыночных данных:

    {
     "req": "market.BTC_CQ.trade.detail",
     "id": "id8"
    }

Пример успешного запроса и возврата данных:


    {
     "ch": "market.BTC_CQ.trade.detail",
     "ts": 1489474082831,
     "data": [
              {
               "id":601595424,
               "price":10195.64,
               "amount":100,
               "direction":"buy",
               "ts":1494495766000
               },
              {
              "id":601595423,
              "price":10195.64,
              "amount":200,
              "direction":"buy",
              "ts":1494495711000
              }
            ]
     }

Пример отметки даты:

    "data": [
      {


       "id": ID сообщения,
       "price": цена транзакции,
       "amount": сумма транзакции ,
       "direction": направление транзакции,
       "ts": временная метка


      }
     ]


#### Подписка на подробные данные трейдинга </а>

После установления соединения с WebSocket API, описание данных для Сервера формируется следующим образом:

    {
    "sub": "market.$symbol.trade.detail",
    "id": "id generated by client"
    }

**Примечание** *: Можно получить только последние 300 подробных торговых данных.


|**Параметр**| Имя | Тип | Описание | Значение По Умолчанию | Диапазон |
|--------------| -----------------| ---------- |----------| ------------| --------------------------------------------------------------------------------|
| symbol | правда | строка | символ контракта |               |напр. "BTC_CW" означает BTC “this_week”、"BTC_NW" означает BTC “next_week”、"BTC_CQ" означает BTC “quarter“|

Пример успешной подписки параметра запроса:

    {
     "sub": "market.BTC_CQ.trade.detail",
     "id": "id7"
    }

Пример успешной подписки и возвращаемого параметра:

    {
     "id": "id7",
     "status": "ok",
     "subbed": "market.BTC_CQ.trade.detail",
     "ts": 1489474081631
    }

Всякий раз, когда трейдинговые данные обновляются, клиент получает данные, например:

    {
    "ch": "market.BTC_NW.trade.detail",
    "ts": 1539831709042,
    "tick": {
    	"id": 265842227,
    	"ts": 1539831709001,
    	"data": [{
    		"amount": 20,
    		"ts": 1539831709001,
    		"id": 265842227259096443,
    		"price": 6742.25,
    		"direction": "buy"
    	        }]
              }
     }

Пример данных:

    "data": [
      {
       "id": ID сообщения,
      "price": цена транзакции,
       "amount": сума транзакции,
       "direction": направление транзакции,
       "ts": временная метка
      }
     ]
